<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <title>CU Expert Connect</title>

     <link rel="stylesheet" href="complete.css">

            <!-- Not sure what the following 2 css files were used for -->
        <!--link rel="stylesheet" href="edit.css"-->
        <!--link rel="stylesheet" href="screen.css"-->
        <link rel="stylesheet" href="custom2.css">
        <link  rel="stylesheet" type="text/css" href="graph.css">

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
        <script type="text/javascript" src="jquery.color.js"></script>
        <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.1/handlebars.min.js"></script>
        <script language="javascript" type="text/javascript" src="jsr_class.js"></script>
        <script language="javascript" type="text/javascript" src="graph_new.js"></script>
        <!--script language="javascript" type="text/javascript" src="elastic_cap.js"></script-->



    <script id="person-template" type="text/x-handlebars-template">
        <tr>
            <td>
                <div class="thumbnail">
                    {{#if thumbnail}}<img src="{{thumbnail}}">{{/if}}
                    <div class="caption">
                        <h5><small>
                            {{#if dcoId}}
                            <a class="{{#if isDcoMember}}dco-logo{{/if}}" href="{{dcoId}}" target="_blank">{{name}}</a>
                            {{else}}
                            <a class="{{#if isDcoMember}}dco-logo{{/if}}" href="{{uri}}" target="_blank">{{name}}</a>
                            {{/if}}
                        </small></h5>
                    </div>
                </div>
                <div class="person-info">
                    {{#if (showMostSpecificType mostSpecificType)}}<div><em class="small">{{mostSpecificType}}</em></div>{{/if}}
                    {{#if email}}<div><strong>Email: </strong><a href="mailto:{{email}}">{{email}}</a></div>{{/if}}
                    {{#if orcid}}<div><strong>ORCID ID:</strong> <a href="{{orcidURL orcid}}" target="_blank">{{orcid}}</a></div>{{/if}}


                    {{#if organization}}
                    <div><strong>Organizations:</strong> {{#expand organization}}<a href="{{uri}}" target="_blank">{{name}}</a>{{/expand}}</div>
                    {{/if}}

                    {{#if affiliations}}
                    <div><strong>Affiliations:</strong></div>
                    {{#list affiliations}}{{position}} - <a href="{{org.uri}}">{{org.name}}</a>{{/list}}
                    {{/if}}

                    {{#if researchArea}}
                    <div><strong>Research Areas:</strong> {{#expand researchArea}}<a href="{{uri}}" target="_blank">{{name}}</a>{{/expand}}</div>
                    {{/if}}

                    {{#if homeCountry}}
                    <div><strong>International Activities:</strong> {{homeCountry.name}}</div>
                    {{/if}}

                </div>
            </td>
        </tr>
    </script>

    <script type="text/javascript">
    var source = $("#person-template").html();
    var template = Handlebars.compile(source);
    </script>

        <!-- following script is for side panels -->
        <script type="text/javascript">
            $(document).ready(function(){
                $(".trigger").click(function(){
                    $(".panel").toggle("fast");
                    $(this).toggleClass("active");
                    return false;
                });
            });
        </script>


        <style>
            .button {
                background-color: #4CAF50; /* Green */
                border: none;
                color: white;
                padding: 6px 10px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 12px;
                margin: 0px 0px;
                -webkit-transition-duration: 0.4s; /* Safari */
                transition-duration: 0.4s;
                cursor: pointer;
            }
            .button1 {
                background-color: white;
                color: black;
                border: 4px solid #4CAF50;
                width: 100%;
                margin: -1px;
            }

            .button1:hover {
                background-color: #4CAF50;
                color: white;
            }
            </style>

    </head>
    
    <body>


    <!-- side panel div coe -->
    <div id="leftpanelcontainer" >
        <div class="panel" id="HelpPanel" style="color:black">
            <h3>Help</h3>
            Find an expert using this network map.
            To add a new research term to the map:
                <ol>
            <li>Type it in via the search bar.</li>
            <li>Add a potential term in the terms panel. Potential terms are terms that are in the portfolio of at least one of the experts already in the map.
            The map can be used to prune or expand lists of experts.</li>
        </ol>
            The Info panel will display the experts, the departments associated with the experts, and the chosen search term(s) of their expertise.<BR>
            The Data panel can be used to export the map into a json or csv file.
            <h3>Legend</h3>
            <img src="key.png" alt="Key">

            <div style="clear:both;"></div>
            <div class="columns"> </div>
            <div style="clear:both;"></div>

        </div>
        <a class="trigger" href="#HelpPanel">Help</a>

    </div>
    <!-- end side panel div code -->



    <div class="wrapper">
            <div id="wrapper-content" role="main">        
                <div class="main" id="main-content" role="main">
                    <div class="col-8">
                        <!--[if lte IE 8]>
                                <p class="ie-alert">This site uses HTML elements that are not recognized by Internet Explorer 8 and below. As a result, the site will not be rendered appropriately. To correct this, please upgrade to Internet Explorer 9, or use another browser.</p>
                        <[endif]-->
                        <div id="toptxt">
                            <div id="headtxt">
                                <div id="wname" style="display:inline-block"><h2 style="float:left">CU Expert Connect:</h2><span style="font-size:20px">Research Map</span></div>
                                <div id="beta" ><h3> <div id="betabutton" style="background-color: red">beta</div> <div id="betatext">Improvements coming soon</div> </h3></div>
                            </div>

                        </div>
                        <div id="queryform" style="display:inline-block">
                               <input name="query" id="query" list="rtopiclist" size="34" accesskey="q" type="text" onkeydown="queryKeyDown(event);">
                               <datalist id="rtopiclist">
                                    <select style="display:none;"></select>
                               </datalist>
                               <!-- hide cutoff for now -->
                               <label style="visibility: hidden" id="cutofflabel" for="queryCutoff">Cutoff:</label>
                               <input style="visibility: hidden" id="queryCutoff" name="queryCutoff" type="text" title="Cutoff" size="4" value="10000" >
                               <input type="submit" value="Search" id="add" type="button" onclick="addKwd();">
                               <input value="Reset" id="resetButton" type="submit" onclick="reset()" disabled>

                        </div> <!-- id="queryform" -->
                        <div = "instrtxt">
                        <BR> Build a map of experts by typing in a term that might represent a faculty members research expertise.
                        <a style="color: blue; display:inline-block; float:right; line-height:32px; height:32px; cursor:pointer" onclick="showhideadvanced(this)">Show advanced</a>
                        <a style="color: blue; margin-right: 50px; display:inline-block; float:right; line-height:32px; height:32px; cursor:pointer" HREF="mailto:vivo@colorado.edu?subject=CU ExpertConnect Feedback&body=Dear User,%0D%0A  While the Expert Map is in beta, we value feedback from your experience.%0D%0A
  Please tell us here if there are features you would like to see and how you are using this information.%0D%0A
Thanks very much,%0D%0A
The FIS Team at CU Boulder">Give us feedback</a>
                    </div>


                        <hr style="clear:both;">
                        <div class="advanced" id="advanced_options">
                            <p>
                                <label>Color scheme:</label>
                                <select id="colorScheme">
                                    <option value="white">White</option>
                                    <option value="black">Black</option>
                                </select>
                                <label>Link color:</label>
                                <select id="linkColor">
                                    <option value="#D0D0D0">Lightest</option>
                                    <option value="#B8B8B8" selected>Light</option>
                                    <option value="#999">Medium</option>
                                    <option value="#777">Medium-Dark</option>
                                    <option value="#555">Dark</option>
                                </select>
                                <label>Gravity:</label>
                                <input type="text" id="graph_gravity" value="1" style="width:25px">
                                <label>Charge:</label>
                                <input type="text" id="graph_charge" value="-1500">
                                <label>Link distance:</label>
                                <input type="text" id="graph_linkdistance" value="40" style="width:25px">
                                <input type="submit" onclick="render()" value="Re-render">
                                <input type="submit" onclick="restoreDefaults()" value="Default">
                            </p>
                        </div>
                        <!-- Tier bar customisation -->
<hr>
                        <div id="container">
                            <div id="center-container">
                               
                                <div id="log"></div>
                                <div id="infovis"></div> 
                                <div class="progress"><div id="progressbar"></div></div>
                                <script type="text/javascript">
                                    var progressBar = new ProgressBar($("#progressbar"));
                                </script>
                            </div>
        
                            <div id="right-container">
                                <div class="tabs">  
                                    <ul  class="titles">
                                        <li><a href="#demo">Terms</a></li>
                                        <li><a href="#logg">Info</a></li>
                                        <li><a href="#extractData">Data</a></li>
                                    </ul>
        
                                    <div class="result_body">
                                        <div class="result_section" id="demo">
                                            <h2>Select Research terms - Click to remove from the map</h2>
                                            <ul id="log_printout">
                                                <li>This panel displays a list of the search terms currently
                                                on the graph. Search for something to begin.</li>
                                            </ul>
                                            <h2>Associated Research Terms - Click to add to the map</h2>
                                            <ul id="other_terms">
                                                <li>This panel displays a list of the search terms associated with other researchers
                                                on the graph. Search for something to begin.</li>
                                            </ul>


                                        </div>
                                        <div class="result_section" id="logg">
                                            <div id="inner-details">
                                                <p>
                                                    This panel displays information about individual
                                                    search terms and groups. Click on a group to display
                                                    its information.
                                                </p>
                                            </div>
                                        </div>
  
                                        <div class="result_section" id="extractData">
                                            <h2>Extract Data</h2>
                                            <p>
                                                Import:
                                                <!--button disabled>SVG</button-->
                                                <button onclick="importGraphDetails();">JSON</button>
                                            <br>
                                                Export:
                                                <!--button onclick="generateGraphSVG();">SVG</button-->
                                                <button id="json" onclick="download(g.export(), 'cuexperts.json')">JSON</button>
                                                <button id="csv" onclick="download(g.toPersonList(), 'cuexperts.csv')">CSV</button>
                                                <!--button onclick="download(g.toDOT(), 'gv')">DOT</button-->
                                            </p>
                                            <textarea id="graphDetails" style="width:99%; height:450px; border:1px solid #EEE; padding:0px;"></textarea>
                                            <p style="position:absolute; bottom:10px">
                                                <img src="key.png" alt="Key">
                                            </p>
                                        </div>
                                    </div>
                                </div>            
                            </div>
                            <form id="download" method="post" style="display:none">
                                <textarea name="content" id="exportContent"></textarea>
                            </form>
                        </div>
                    </div>
                </div>
        
            </div>
        
        </div> <!-- #wrapper-content -->
        <hr class="g-clear-floats" />
    </div>

    </body>
</html>

